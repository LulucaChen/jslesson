# 变量类型和计算

## 值类型和引用类型（对象数组和函数）

值类型不会相互干预

### type of  输出类型6种

只区分前四种值类型，引用类型除了function都是object

- undefined
- string
- number
- boolean
- object
- function

### 强制类型转换

1. 字符串拼接

   0==‘’  true

2. if 里面是布尔类型

### 三等=== 与== 的区别（面试会考）

怎么看属性存在

```js
var obj ={}
if(obj.a == null){}
```



### JS 的内置函数

- Object
- Array
- Boolean
- Number
- String
- Function
- Date
- RegExp
- Error
- math(对象)

### js 按照存储方式区分类型

### 如何理解json 是个对象（也是一个数据结构）

if(0),if(false) if(NaN) if('') if(null) if (undefined) 都是false

## 原型和原型链

#### 构造函数

1. 默认return this

   ```js
   var a = new Object()
   ```

2. 构造函数名首字母大写
3. 使用instanceof判断一个函数是否是一个变量的构造函数

#### 原型规则和实例

所有的引用类型，都具有对象特性，即自由扩展属性，函数也有自由扩展属性

所有引用类型，都有_proto_属性，隐式原型

所有函数，都有一个prototype属性，显示原型

所有的引用类型，隐式原型属性值指向构造函数的显示原型？？？

当试图得到一个对象的某个属性是，如果这个对象本身没有这个属性，那么会去他的_proto_ 中寻找

hasOwnProperty属性判断是否来自原型的属性

### 面试题

- 判断一个变量是否是数组
- 写一个原型链继承的例子
- zepto 源码中如何使用原型链
- 阅读源码是高效提高技能的方式

### 函数声明（提前）

函数声明与变量声明是一样的,先声明变量

```js
var h =1
```

var h 此时h = undefined ,然后h =1

```js
var h = function(){}
```

### 变量提升

- 执行上下文
  	- 范围：一段<script>或者一个函数
  	- 全局：变量定义、函数声明
  	- 函数：变量定义、函数声明、this、argument
  	- this 和argument提前声明？？？
- this 要在执行的时候才确认值，定义时无法确认
  - 作为构造函数执行
  - 作为对象属性执行
  - 作为普通函数执行 this === window
  - call apply blind(.blind 必须用函数表达式)
- 作用域
  - 没有块级作用域（var 块里面和外面是一样的）
  - 函数和全局作用域
  - 自由变量（当前作业域没有定义）
- 作用域链（父作用域是定义的时候的作用域，不是执行的时候的作用域）
- 闭包
  	- 函数作为返回值
  	- 函数作为参数传递

## 同步和异步的区别是什么

- 同步和异步的区别？分别举一个例子

- settimeout 的笔试题

- 前端使用异步的场景有哪些？

  #### 知识点

  - 什么是异步
  - 前端使用异步的场景
  - 异步和单线程 

## jswebAPI

- w3c标准并没有规定任何js基础相关的东西

- 不管变量类型、原型、作用域和异步（ecmi管）

- 只管定义用于 浏览器操作页面的 api 和全局变量

- 全面考虑，js内置的全局函数和对象有哪些？

- object array Boolean string math json

- window document

- 未定义的全局变量，navigator.userAgent

  ### 常说的js包含两部分

  - js基础知识（ecma262标准）
  - js-web-api(w3c标准)

  ### Dom操作

  文档 对象 模型 document object model

  - Dom 是哪种基本的数据结构（树）
  - Dom 操作的常用API有哪些
  - Dom 节点的attr 和property 有什么区别

  dom 节点操作

  - 获取dom节点
  - property 有关js的
  - attribute 有关文档的

  ### bom操作

  - 如何检测浏览器的类型
  - 解析url的各部分

  - 知识点：
    - navigator判断浏览器
    - screen
    - location & history
  
  ## 事件
  
  - 通用事件绑定
  -  事件冒泡 会往上触发
  
  ### 面试题
  
  - 编写一个通用的事件监听函数！！！要会写代理
  - 描述事件冒泡流程
  - 对于一个无线下拉加载图片的页面，如何给每个图片绑定事件（!使用代理）
  - 简述事件冒泡流程
    	- Dom树形结构
    	- 冒泡的应用
    	- 阻止冒泡
  
  - 代理的优点：1.代码简洁 2. 给浏览器压力小
  
  ## Ajax
  
  ### 题目
  
  - 手动编写一个 ajax ，不依赖第三方库！！！需要默写
  - 跨域的几种实现方式（不同产品的跨域实现方式不一样、前端的域名和服务端的域名不一样）
  - 跨域的原理是什么
  
  ### 知识点
  
  - XMLHttpRequest
  - 状态码说明
  - 跨域
  
  ### readyState
  
  - 0 -（未初始化）还没有调用send（）方法
  - 1 - (载入) 已调用send（）方法，正在发送请求
  - 2 - （载入完成）send()方法执行完成，已经接受到全部响应内容
  - 3 - （交互）正在解析响应内容
  - 4 - （完成）响应内容解析完成，可以在客户端调用了
  
  ### status
  
  - 2xx - 表示成功处理请求。如200
  - 3xx - 需要重定向，浏览器直接跳转
  - 4xx - 客户端请求错误，如404
  - 5xx - 服务端错误

### 跨域

- 什么是跨域

   - 浏览器有同源策略，不允许ajax访问其他域接口

   - 跨域条件：协议、域名、端口，有一个不同就算跨域

     ##### 可以跨域的三个标签

     - 但是有三个标签允许跨域加载资源
     - <img>用于打点统计，统计网站可能是其他域
     - <link> <script>

     ##### 跨域注意事项

     - 所有跨域请求都必须经过信息提供方允许
     - 如果未经允许即可获取，哪是浏览器同源策略出现漏洞

     ##### jsonp实现原理

     - 加载classindex .html文件
     - 不一定服务器端真正有一个classindex.html文件
     - 服务器可以根据请求，动态生成一个文件

     ##### 服务器端设置 http header 

- 实现方式jsonp

  ## 存储

  ### 题目

  - 请描述cookie ，sessionstorage 和localStorage 的区别？

  ### 知识点

  ##### cookie

  - 本身用于客户端和服务端通信
  - 但是他有本地存储的功能，于是被“借用”
  - 使用document.cookie = ....获取和修改即可 

  ##### cookie 用于存储的缺点

  - 存储量太小，只有4Kb
  - 所有http请求都带着，会影响获取资源的效率
  - api简单，需要封装才能用 document.cookie =...

  locationstorage和sessionstorage

  - html5 专门为存储而设计，最大容量5m
  - api简单易用：



## 页面加载

### 加载资源的形式

- 输入url加载HTML
- 加载html中的静态资源

### 加载一个资源的过程

- 浏览器根据dns服务器得到域名的ip地址
-  像这个ip的机器发送HTTP请求
- 服务器收到、处理并返回HTTP请求
- 浏览器得到返回内容

浏览器渲染页面的过程

- 根据html结构生成DOM tree
- 根据css 生成cssom
- 将dom 和cssom整合形成rendertree
-  根据rendertree开始渲染和展示
- 遇到<script>时，会执行并阻塞渲染

##### 为什么把css 放在head中

##### 为什么把script放在最后

- 性能优化
- script 处理可以拿到所有节点、标签

#####  window.onload 和 DOMContentLoaded 区别

window : 页面的全部资源加载完才会执行，包括图片、视频等

DOM ： 渲染完即可执行，此时图片、视频可能还没加载完

### 从输入url到得到html的详细过程

- 根据DNS服务器得到IP地址
- 向IP对应的机器发送HTTP请求
- 服务器收到、处理并返回HTTP请求
- 浏览器得到返回内容

### 性能优化

- 性能优化有哪些点，没有标准答案
  	- 多使用内存、缓存或者其他方法（不是硬盘的存储）
  	- 减少CPU计算、较少网络

- 从哪里入手
  - 加载页面和静态资源
  - 页面渲染（css 放前面，js 放后面）

#### 加载资源优化

- 静态资源的压缩合并

  加入有三个js文件，如果把三个文件合并成一个文件，减少请求

- 静态资源缓存（减少请求）
- 使用CDN让资源加载更快（CDN是不同区域的机房请求？）
- 使用ssr后端渲染，数据直接输出到HTML中

#### 渲染优化

- css 放前面，js 放后面
- 懒加载（图片懒加载、下拉加载更多）
- 减少DOM查询，对DOM查询 做缓存（DOM操作昂贵）
- 减少DOM操作，多个尽量合并一起执行
- 事件节流
- 尽早执行操作（如DOMContentloaded）

##### 资源合并

 跟面试官说用构建工具合并就可以了

##### 缓存

- 通过链接名称控制缓存

- <script src = "abc_1.js"></script>

- 只有内容改变的时候，链接名称才会改变

- <script src = "abc_2.js"></script>

##### 使用SSR 后端渲染

- vue react 提出了这样的概念
- jsp php asp 都属于后端渲染

##### 懒加载 

<img id='img1' src='short.png' data-real="abc.png"/>

<script type = "text/javascript">
    var img1 = document.getElementById('img1')
    img1.src = img1.getAttribute('data-real')
</script>//加快渲染速度

##### 缓存DOM查询

把东西存在变量里

##### 合并DOM插入

```js
var frag = document.createDocumentFragment();
//往frag里面插了之后，再将frag插入Dom树里
```

##### 事件节流(快速操作的时候不要触发事件)

setTimeout

##### 尽早操作

### 安全性

- 综合性的问题：场景的前端安全问题有哪些

  #### 知识点

  - xss 跨站请求攻击
    - 在新浪博客写一篇文字，同时插入一段<script> 
    - 攻击代码中，获取cookie，发送自己的服务器
    - 发布博客，有人查看博客内容
    - 会把查看这的cookie发送到攻击者的服务器
    - 前端替换关键字

  

  - xsrf 

     - 你已登录一个购物网站，正在浏览器商品

     - 该网站付费接口是xxxx但是没有任何验证

     - 然后收到一封邮件，隐藏在 <img src =>

     - 你查看邮件的时候就悄悄付费了

       解决：增加验证流程，如输入指纹、密码、短信验证码

### 面试技巧

- 简历

- 过程中

  #### 简历

  - 简洁明了，重点突出项目经历和解决方案
  - 把个人博客放在简历中，并且定期维护更新博客
  - 把个人的开源项目放在简历中，并维护开源项目
  - 简历千万不要造假，要保持能力和经历上的真实性

  #### 面试过程中

  - 如何看待加班？加班就像借钱，救急不救穷 
  - 千万不可挑战面试官，不要挑战面试官
  - 学会给面试官惊喜，但不要太多
  - 遇到不会回答的问题，说出你知道的也可以
  - 谈谈你的缺点--说一下你最近正在学什么就可以了